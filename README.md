# Queue Forge Plugin v2.0.0

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)
[![Java Version](https://img.shields.io/badge/Java-17%2B-orange.svg)](https://www.oracle.com/java/technologies/javase-jdk17-downloads.html)
[![Minecraft Version](https://img.shields.io/badge/Minecraft-1.20.1-green.svg)](https://www.minecraft.net/)
[![Server Type](https://img.shields.io/badge/Server-Forge%2FMohist%2FArclight-red.svg)](https://files.minecraftforge.net/)

ä¸€ä¸ªä¸º Minecraft 1.20.1 Forge ç¯å¢ƒè®¾è®¡çš„ç°ä»£åŒ–é˜Ÿåˆ—ç®¡ç†æ’ä»¶ï¼Œä½¿ç”¨ HTTP åè®®ä¸ä»£ç†æœåŠ¡å™¨é€šä¿¡ã€‚

## ğŸš€ ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- **HTTP é€šä¿¡**: ä½¿ç”¨ç°ä»£çš„ HTTP åè®®æ›¿ä»£ä¼ ç»Ÿçš„ BungeeCord æ¶ˆæ¯é€šé“
- **Forge å…¼å®¹**: å®Œå…¨æ”¯æŒ Minecraft 1.20.1 + Forge 47.3.22
- **æ··åˆæœåŠ¡å™¨æ”¯æŒ**: å…¼å®¹ Mohistã€Arclight ç­‰æ··åˆæœåŠ¡å™¨
- **å¼‚æ­¥å¤„ç†**: æ‰€æœ‰ç½‘ç»œæ“ä½œéƒ½æ˜¯å¼‚æ­¥æ‰§è¡Œï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹

### é˜Ÿåˆ—ç³»ç»Ÿ
- **æ™ºèƒ½é˜Ÿåˆ—**: VIP ä¼˜å…ˆçº§é˜Ÿåˆ— + æ™®é€šé˜Ÿåˆ—
- **æ‰¹é‡ä¼ é€**: æ”¯æŒæ‰¹é‡ä¼ é€å¤šä¸ªç©å®¶ä»¥æé«˜æ•ˆç‡
- **å®æ—¶çŠ¶æ€**: å®æ—¶é˜Ÿåˆ—ä½ç½®å’Œç­‰å¾…æ—¶é—´æ˜¾ç¤º
- **ç¦»çº¿æ¸…ç†**: è‡ªåŠ¨æ¸…ç†ç¦»çº¿ç©å®¶

### VIP ç³»ç»Ÿ
- **æƒé™æ•´åˆ**: æ”¯æŒ LuckPermsã€PermissionsEx ç­‰æƒé™æ’ä»¶
- **ç¼“å­˜ä¼˜åŒ–**: ä½¿ç”¨ Caffeine ç¼“å­˜æé«˜æ€§èƒ½
- **ä¼˜å…ˆçº§å€æ•°**: å¯é…ç½®çš„ VIP ä¼˜å…ˆçº§è®¡ç®—

### å®‰å…¨åŠŸèƒ½
- **IP ç™½åå•**: æ”¯æŒ CIDR è¡¨ç¤ºæ³•çš„ IP è¿‡æ»¤
- **åç ´è§£**: æ£€æµ‹å¹¶é˜»æ­¢ç›—ç‰ˆå®¢æˆ·ç«¯
- **è¿æ¥é™åˆ¶**: é˜²æ­¢é¢‘ç¹è¿æ¥æ”»å‡»
- **å®‰å…¨è®¤è¯**: HTTP Bearer Token è®¤è¯

### æ•°æ®å­˜å‚¨
- **å¤šæ•°æ®åº“æ”¯æŒ**: SQLite (é»˜è®¤) å’Œ MySQL
- **è¿æ¥æ± **: HikariCP é«˜æ€§èƒ½è¿æ¥æ± 
- **æ•°æ®æŒä¹…åŒ–**: é˜Ÿåˆ—å†å²ã€VIP è®°å½•ã€ç»Ÿè®¡ä¿¡æ¯

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

### æœåŠ¡å™¨è¦æ±‚
- **Minecraft**: 1.20.1
- **Forge**: 47.3.22 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Java**: 17 æˆ–æ›´é«˜ç‰ˆæœ¬
- **å†…å­˜**: æœ€ä½ 2GB RAM

### æ”¯æŒçš„æœåŠ¡å™¨ç±»å‹
- âœ… **Mohist** (æ¨è)
- âœ… **Arclight** 
- âœ… **Paper** (åŸºç¡€åŠŸèƒ½)
- âœ… **Spigot** (åŸºç¡€åŠŸèƒ½)
- âš ï¸ **Bukkit** (æœ‰é™æ”¯æŒ)

### ä¾èµ–æ’ä»¶ (å¯é€‰)
- **LuckPerms** - VIP æƒé™ç®¡ç†
- **PermissionsEx** - æ›¿ä»£æƒé™ç³»ç»Ÿ
- **Vault** - ç»æµç³»ç»Ÿæ•´åˆ
- **PlaceholderAPI** - å˜é‡æ”¯æŒ

## ï¿½ï¸ å®‰è£…æ­¥éª¤

### 1. ç¼–è¯‘æ’ä»¶
```bash
cd Server
mvn clean package
```

### 2. å®‰è£…æ’ä»¶
å°†ç”Ÿæˆçš„ `queue-forge-plugin-2.0.0-SNAPSHOT.jar` å¤åˆ¶åˆ°æœåŠ¡å™¨çš„ `plugins` ç›®å½•ã€‚

### 3. é…ç½®è®¾ç½®
é¦–æ¬¡è¿è¡Œåï¼Œç¼–è¾‘ `plugins/QueueForgePlugin/config.yml`:

```yaml
# HTTPä»£ç†æœåŠ¡å™¨é…ç½®
proxy:
  server-url: "http://your-proxy-server:8080"
  token: "your-secret-token"
  heartbeat-interval: 30

# é˜Ÿåˆ—é…ç½®
queue:
  enabled: true
  max-size: 100
  process-interval: 5
  transfer-batch-size: 3

# VIPé…ç½®
vip:
  enabled: true
  permission: "queue.vip"
  priority-multiplier: 2.0
```

### 4. æ•°æ®åº“é…ç½® (MySQL å¯é€‰)
```yaml
database:
  type: "mysql"
  url: "jdbc:mysql://localhost:3306/queue"
  username: "queue_user"
  password: "your_password"
  max-pool-size: 10
```

## ğŸ® ä½¿ç”¨è¯´æ˜

### ç©å®¶å‘½ä»¤
| å‘½ä»¤ | æè¿° | æƒé™ |
|------|------|------|
| `/queue` | åŠ å…¥é˜Ÿåˆ—æˆ–æŸ¥çœ‹çŠ¶æ€ | `queue.use` |
| `/queueinfo` | æŸ¥çœ‹é˜Ÿåˆ—ä¿¡æ¯ | `queue.info` |
| `/leave` | ç¦»å¼€é˜Ÿåˆ— | `queue.leave` |

### ç®¡ç†å‘˜å‘½ä»¤
| å‘½ä»¤ | æè¿° | æƒé™ |
|------|------|------|
| `/queueadmin clear` | æ¸…ç©ºæ‰€æœ‰é˜Ÿåˆ— | `queue.admin` |
| `/queueadmin reload` | é‡è½½é…ç½® | `queue.admin` |
| `/queueadmin remove <ç©å®¶>` | ç§»é™¤æŒ‡å®šç©å®¶ | `queue.admin` |
| `/queueadmin setvip <ç©å®¶> <true/false>` | è®¾ç½® VIP çŠ¶æ€ | `queue.admin` |
| `/qstats` | æŸ¥çœ‹è¯¦ç»†ç»Ÿè®¡ | `queue.stats` |
| `/qreload` | é‡è½½é…ç½® | `queue.reload` |

### æƒé™èŠ‚ç‚¹
| æƒé™ | æè¿° | é»˜è®¤ |
|------|------|------|
| `queue.*` | æ‰€æœ‰æƒé™ | OP |
| `queue.use` | ä½¿ç”¨é˜Ÿåˆ— | `true` |
| `queue.vip` | VIP ä¼˜å…ˆçº§ | `false` |
| `queue.admin` | ç®¡ç†æƒé™ | OP |

## ğŸ”§ HTTP API

### ä»£ç†æœåŠ¡å™¨ç«¯ç‚¹
æ’ä»¶ä¼šå‘ä»£ç†æœåŠ¡å™¨å‘é€ä»¥ä¸‹ HTTP è¯·æ±‚ï¼š

#### å¿ƒè·³
```http
POST /api/heartbeat
Authorization: Bearer your-secret-token
Content-Type: application/json

{
  "serverName": "queue-server",
  "onlinePlayers": 25,
  "maxPlayers": 100,
  "tps": 19.8,
  "timestamp": 1691234567890
}
```

#### ç©å®¶ä¼ é€
```http
POST /api/player/transfer
Authorization: Bearer your-secret-token
Content-Type: application/json

{
  "playerId": "uuid-here",
  "playerName": "PlayerName",
  "sourceServer": "queue-server",
  "targetServer": "game",
  "timestamp": 1691234567890
}
```

#### æœåŠ¡å™¨çŠ¶æ€æŸ¥è¯¢
```http
GET /api/server/status
Authorization: Bearer your-secret-token
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### å†…å­˜ä¼˜åŒ–
- **ç¼“å­˜ç³»ç»Ÿ**: ä½¿ç”¨ Caffeine ç¼“å­˜å‡å°‘æ•°æ®åº“æŸ¥è¯¢
- **å¯¹è±¡æ± **: é‡ç”¨æ•°æ®åº“è¿æ¥å’Œ HTTP è¿æ¥
- **å¼‚æ­¥å¤„ç†**: é¿å…é˜»å¡ä¸»çº¿ç¨‹

### ç½‘ç»œä¼˜åŒ–
- **è¿æ¥å¤ç”¨**: HTTP/1.1 Keep-Alive
- **å‹ç¼©ä¼ è¾“**: GZIP å‹ç¼© (å¦‚æœä»£ç†æœåŠ¡å™¨æ”¯æŒ)
- **è¶…æ—¶æ§åˆ¶**: åˆç†çš„è¿æ¥å’Œè¯»å–è¶…æ—¶

### æ•°æ®åº“ä¼˜åŒ–
- **è¿æ¥æ± **: HikariCP é«˜æ€§èƒ½è¿æ¥æ± 
- **ç´¢å¼•ä¼˜åŒ–**: æ•°æ®åº“è¡¨æ·»åŠ é€‚å½“ç´¢å¼•
- **æ‰¹é‡æ“ä½œ**: å‡å°‘æ•°æ®åº“å¾€è¿”æ¬¡æ•°

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ’ä»¶æ— æ³•åŠ è½½
**ç—‡çŠ¶**: æ’ä»¶åœ¨å¯åŠ¨æ—¶è¢«ç¦ç”¨
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ Java ç‰ˆæœ¬ (éœ€è¦ 17+)
- ç¡®è®¤æœåŠ¡å™¨æ”¯æŒ Paper API
- æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯æ—¥å¿—

#### 2. HTTP è¿æ¥å¤±è´¥
**ç—‡çŠ¶**: æ— æ³•è¿æ¥åˆ°ä»£ç†æœåŠ¡å™¨
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ä»£ç†æœåŠ¡å™¨åœ°å€å’Œç«¯å£
- ç¡®è®¤è®¤è¯ä»¤ç‰Œæ­£ç¡®
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

#### 3. VIP æ£€æµ‹å¤±è´¥
**ç—‡çŠ¶**: VIP ç©å®¶è¢«å½“ä½œæ™®é€šç©å®¶
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥æƒé™æ’ä»¶é…ç½®
- ç¡®è®¤ VIP æƒé™èŠ‚ç‚¹è®¾ç½®
- ä½¿ç”¨ `/queueadmin setvip` æ‰‹åŠ¨è®¾ç½®

#### 4. æ•°æ®åº“è¿æ¥é”™è¯¯
**ç—‡çŠ¶**: æ•°æ®åº“ç›¸å…³åŠŸèƒ½å¼‚å¸¸
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥æ•°æ®åº“é…ç½®
- ç¡®è®¤æ•°æ®åº“æœåŠ¡è¿è¡Œæ­£å¸¸
- æŸ¥çœ‹æ•°æ®åº“è¿æ¥æƒé™

### è°ƒè¯•æ¨¡å¼
å¯ç”¨è°ƒè¯•æ¨¡å¼ä»¥è·å–æ›´è¯¦ç»†çš„æ—¥å¿—:
```yaml
debug: true
```

### æ—¥å¿—åˆ†æ
é‡è¦æ—¥å¿—æ–‡ä»¶ä½ç½®:
- **æ’ä»¶æ—¥å¿—**: `logs/latest.log`
- **é˜Ÿåˆ—æ•°æ®**: `plugins/QueueForgePlugin/queue.db`
- **é…ç½®æ–‡ä»¶**: `plugins/QueueForgePlugin/config.yml`

## ï¿½ æ›´æ–°è¯´æ˜

### v2.0.0 çš„ä¸»è¦å˜æ›´
1. **æ¶æ„é‡å†™**: ä» BungeeCord æ¶ˆæ¯é€šé“æ”¹ä¸º HTTP é€šä¿¡
2. **Forge ä¼˜åŒ–**: ä¸“é—¨é’ˆå¯¹ Forge ç¯å¢ƒä¼˜åŒ–
3. **æ€§èƒ½æå‡**: ä½¿ç”¨ç°ä»£åŒ–çš„ç¼“å­˜å’Œå¼‚æ­¥å¤„ç†
4. **å®‰å…¨å¢å¼º**: æ–°å¢å¤šå±‚å®‰å…¨éªŒè¯æœºåˆ¶
5. **åŠŸèƒ½æ‰©å±•**: å¢åŠ æ›´å¤šç®¡ç†å‘½ä»¤å’Œç»Ÿè®¡åŠŸèƒ½

### è¿ç§»æŒ‡å—
ä» v1.x å‡çº§åˆ° v2.0.0:
1. **å¤‡ä»½æ•°æ®**: å¤‡ä»½æ—§ç‰ˆæœ¬çš„é…ç½®å’Œæ•°æ®
2. **æ›´æ–°é…ç½®**: ä½¿ç”¨æ–°çš„é…ç½®æ ¼å¼
3. **æµ‹è¯•åŠŸèƒ½**: åœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯æ‰€æœ‰åŠŸèƒ½
4. **æ›´æ–°ä»£ç†**: ç¡®ä¿ä»£ç†æœåŠ¡å™¨æ”¯æŒæ–°çš„ HTTP API

## ğŸ“ æ”¯æŒ

### è·å–å¸®åŠ©
- **GitHub Issues**: [æäº¤é—®é¢˜](https://github.com/xiaoxiao-cvs/QueueServer/issues)
- **æ–‡æ¡£**: æŸ¥çœ‹åœ¨çº¿æ–‡æ¡£
- **ç¤¾åŒº**: åŠ å…¥å¼€å‘è€…ç¤¾åŒº

### è´¡çŒ®ä»£ç 
æ¬¢è¿æäº¤ Pull Request æ¥æ”¹è¿›è¿™ä¸ªæ’ä»¶:
1. Fork è¿™ä¸ªä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. å‘èµ· Pull Request

### è®¸å¯è¯
æœ¬é¡¹ç›®ä½¿ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

---

**å¼€å‘è€…**: QueueServer Team  
**ç‰ˆæœ¬**: 2.0.0  
**æ”¯æŒ**: Minecraft 1.20.1 + Forge 47.3.22  
**æœ€åæ›´æ–°**: 2025-08-06
- âœ… åŸºç¡€é˜Ÿåˆ—ç®¡ç†ç³»ç»Ÿ
- âœ… Mohist æ··åˆæœåŠ¡å™¨æ”¯æŒ
- âœ… VIP ä¼˜å…ˆé˜Ÿåˆ—
- âœ… æœåŠ¡å™¨çŠ¶æ€ç›‘æ§
- âœ… æ•°æ®åº“æŒä¹…åŒ–
- âœ… å‘½ä»¤ç³»ç»Ÿ
- ğŸ”„ ä»£ç†ç½‘ç»œé›†æˆ
- ğŸ”„ Web ç®¡ç†ç•Œé¢

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº [MIT License](LICENSE) å¼€æºåè®®ã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- [Mohist å®˜ç½‘](https://mohistmc.com/)
- [Spigot API æ–‡æ¡£](https://hub.spigotmc.org/javadocs/spigot/)
- [Velocity æ–‡æ¡£](https://docs.papermc.io/velocity)
- [é—®é¢˜åé¦ˆ](https://github.com/xiaoxiao-cvs/QueueServer/issues)

## ğŸ‘¥ å¼€å‘å›¢é˜Ÿ

- **ç»´æŠ¤è€…**: QueueServer Team
- **è´¡çŒ®è€…**: æŸ¥çœ‹ [Contributors](https://github.com/xiaoxiao-cvs/QueueServer/graphs/contributors)

---

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª â­ Starï¼

æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Ÿæ¬¢è¿ [æäº¤ Issue](https://github.com/xiaoxiao-cvs/QueueServer/issues/new) æˆ–åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºè®¨è®ºã€‚