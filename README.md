# Minecraft Queue Server - Mohist Edition

[![License: GPL v3](https://img.shields.io/badge/License-GPLv3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)
[![Java Version](https://img.shields.io/badge/Java-17%2B-orange.svg)](https://www.oracle.com/java/technologies/javase-jdk17-downloads.html)
[![Minecraft Version](https://img.shields.io/badge/Minecraft-1.20.1-green.svg)](https://www.minecraft.net/)
[![Server Type](https://img.shields.io/badge/Server-Mohist-red.svg)](https://mohistmc.com/)

ä¸€ä¸ªä¸“ä¸º Minecraft æœåŠ¡å™¨è®¾è®¡çš„é˜Ÿåˆ—ç®¡ç†ç³»ç»Ÿï¼Œç‰¹åˆ«é’ˆå¯¹ Mohist æ··åˆæœåŠ¡å™¨ï¼ˆæ”¯æŒ Forge Mod å’Œ Bukkit æ’ä»¶ï¼‰è¿›è¡Œäº†ä¼˜åŒ–ã€‚è¯¥ç³»ç»Ÿæ”¯æŒæœåŠ¡å™¨è´Ÿè½½å‡è¡¡ã€VIP ä¼˜å…ˆé˜Ÿåˆ—ã€ä»¥åŠéæ­£ç‰ˆç©å®¶æ”¯æŒã€‚

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

### é˜Ÿåˆ—ç®¡ç†
- âœ… **æ™ºèƒ½é˜Ÿåˆ—ç³»ç»Ÿ** - è‡ªåŠ¨ç®¡ç†ç©å®¶æ’é˜Ÿï¼Œæ”¯æŒæ‰¹é‡ä¼ é€
- âœ… **VIP ä¼˜å…ˆé˜Ÿåˆ—** - VIP ç©å®¶äº«æœ‰ä¼˜å…ˆè¿›å…¥æƒé™
- âœ… **å®æ—¶ç›‘æ§** - å®æ—¶ç›‘æ§ç›®æ ‡æœåŠ¡å™¨çŠ¶æ€å’Œåœ¨çº¿äººæ•°
- âœ… **è‡ªåŠ¨é‡è¿** - æœåŠ¡å™¨ç¦»çº¿æ—¶è‡ªåŠ¨æš‚åœé˜Ÿåˆ—ï¼Œæ¢å¤æ—¶ç»§ç»­

### æœåŠ¡å™¨å…¼å®¹æ€§
- âœ… **Mohist æ··åˆæœåŠ¡å™¨** - å®Œå…¨å…¼å®¹ Forge Mod å’Œ Bukkit æ’ä»¶ç¯å¢ƒ
- âœ… **éæ­£ç‰ˆæ”¯æŒ** - æ”¯æŒç¦»çº¿æ¨¡å¼æœåŠ¡å™¨å’Œéæ­£ç‰ˆç©å®¶
- âœ… **å¤šæœåŠ¡å™¨æ¶æ„** - æ”¯æŒ BungeeCord/Velocity ä»£ç†ç½‘ç»œ
- âœ… **ç‹¬ç«‹/ä»£ç†æ¨¡å¼** - å¯ä½œä¸ºç‹¬ç«‹æœåŠ¡å™¨æˆ–ä»£ç†ç½‘ç»œçš„ä¸€éƒ¨åˆ†è¿è¡Œ

### ç®¡ç†åŠŸèƒ½
- âœ… **å‘½ä»¤ç³»ç»Ÿ** - å®Œæ•´çš„ç®¡ç†å‘˜å’Œç©å®¶å‘½ä»¤é›†
- âœ… **é…ç½®çƒ­é‡è½½** - æ— éœ€é‡å¯å³å¯é‡æ–°åŠ è½½é…ç½®
- âœ… **æ•°æ®æŒä¹…åŒ–** - æ”¯æŒ SQLite/MySQL æ•°æ®åº“å­˜å‚¨
- âœ… **è¯¦ç»†æ—¥å¿—** - å®Œæ•´çš„æ“ä½œæ—¥å¿—å’Œé”™è¯¯è¿½è¸ª

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- **Java**: 17 æˆ–æ›´é«˜ç‰ˆæœ¬
- **æœåŠ¡å™¨**: Mohist 1.20.1 æˆ–å…¼å®¹ç‰ˆæœ¬
- **å†…å­˜**: æœ€ä½ 2GB RAM æ¨è
- **ç½‘ç»œ**: ç¨³å®šçš„ç½‘ç»œè¿æ¥ï¼ˆç”¨äºæœåŠ¡å™¨é—´é€šä¿¡ï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ä¸‹è½½å’Œå®‰è£…

ä» [Releases](releases/) é¡µé¢ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„æ’ä»¶ JAR æ–‡ä»¶ï¼š

```bash
# ä¸‹è½½é¢„ç¼–è¯‘ç‰ˆæœ¬
wget https://github.com/xiaoxiao-cvs/QueueServer/releases/latest/download/queue-mohist-1.0.0-SNAPSHOT.jar
```

æˆ–è€…ä»æºç ç¼–è¯‘ï¼š

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/xiaoxiao-cvs/QueueServer.git
cd QueueServer

# ç¼–è¯‘æ’ä»¶
mvn clean package

# æ’ä»¶æ–‡ä»¶ä½äº target/queue-mohist-1.0.0-SNAPSHOT.jar
```

### 2. éƒ¨ç½²æ’ä»¶

1. å°†ç¼–è¯‘å¥½çš„ JAR æ–‡ä»¶æ”¾å…¥ Mohist æœåŠ¡å™¨çš„ `plugins/` ç›®å½•
2. å¯åŠ¨æœåŠ¡å™¨ä»¥ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶
3. æ ¹æ®éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ `plugins/MinecraftQueueServer/config.yml`
4. é‡å¯æœåŠ¡å™¨æˆ–ä½¿ç”¨ `/queueadmin reload` é‡æ–°åŠ è½½é…ç½®

### 3. åŸºç¡€é…ç½®

ç¼–è¾‘ `config.yml` æ–‡ä»¶ï¼š

```yaml
# æœåŠ¡å™¨è®¾ç½®
server:
  queue-server: true
  target-server-host: "your-game-server.com"  # ç›®æ ‡æ¸¸æˆæœåŠ¡å™¨åœ°å€
  target-server-port: 25565                   # ç›®æ ‡æ¸¸æˆæœåŠ¡å™¨ç«¯å£
  max-players: 45                             # é˜Ÿåˆ—æœåŠ¡å™¨æœ€å¤§å®¹é‡
  standalone-mode: false                      # æ˜¯å¦ä¸ºç‹¬ç«‹æ¨¡å¼

# é˜Ÿåˆ—è®¾ç½®
queue:
  enabled: true
  check-interval: 30      # æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
  transfer-batch-size: 5  # æ‰¹é‡ä¼ é€æ•°é‡
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### ç©å®¶å‘½ä»¤

| å‘½ä»¤ | åˆ«å | æè¿° | ç¤ºä¾‹ |
|------|------|------|------|
| `/queue` | `/q` | æŸ¥çœ‹å½“å‰é˜Ÿåˆ—ä½ç½® | `/queue` |
| `/queueinfo` | `/qi`, `/qinfo` | æ˜¾ç¤ºè¯¦ç»†é˜Ÿåˆ—çŠ¶æ€ | `/queueinfo` |
| `/leave` | `/lq` | ç¦»å¼€é˜Ÿåˆ— | `/leave` |

### ç®¡ç†å‘˜å‘½ä»¤

| å‘½ä»¤ | æƒé™ | æè¿° | ç¤ºä¾‹ |
|------|------|------|------|
| `/queueadmin reload` | `queue.admin` | é‡æ–°åŠ è½½é…ç½® | `/queueadmin reload` |
| `/queueadmin status` | `queue.admin` | æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€ | `/queueadmin status` |
| `/queueadmin kick <player>` | `queue.admin` | å°†ç©å®¶è¸¢å‡ºé˜Ÿåˆ— | `/queueadmin kick Steve` |
| `/queueadmin priority <player>` | `queue.admin` | ç»™äºˆç©å®¶ä¼˜å…ˆæƒ | `/queueadmin priority Steve` |

### æƒé™èŠ‚ç‚¹

- `queue.admin` - ç®¡ç†å‘˜æƒé™ï¼ˆæ‰€æœ‰ç®¡ç†å‘½ä»¤ï¼‰
- `queue.vip` - VIP æƒé™ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰
- `queue.bypass` - ç»•è¿‡é˜Ÿåˆ—ç›´æ¥è¿›å…¥

## âš™ï¸ é«˜çº§é…ç½®

### VIP ç³»ç»Ÿé…ç½®

```yaml
vip:
  enabled: true
  priority-slots: 10        # VIP ä¸“ç”¨ä½ç½®æ•°é‡
  bypass-queue: true        # VIP æ˜¯å¦å¯ä»¥ç»•è¿‡é˜Ÿåˆ—
  priority-multiplier: 2.0  # VIP ä¼˜å…ˆçº§å€æ•°
```

### æ•°æ®åº“é…ç½®

```yaml
database:
  type: "sqlite"  # æˆ– "mysql"
  # SQLite é…ç½®
  sqlite:
    file: "queue_data.db"
  # MySQL é…ç½®ï¼ˆå¯é€‰ï¼‰
  mysql:
    host: "localhost"
    port: 3306
    database: "queue_server"
    username: "your_username"
    password: "your_password"
```

### æœåŠ¡å™¨ç›‘æ§é…ç½®

```yaml
monitor:
  enabled: true
  check-interval: 30          # ç›‘æ§æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
  broadcast-interval: 300     # çŠ¶æ€å¹¿æ’­é—´éš”ï¼ˆç§’ï¼‰
  connection-timeout: 5000    # è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  broadcast-on-change: true   # çŠ¶æ€å˜åŒ–æ—¶ç«‹å³å¹¿æ’­
```

## ğŸ”§ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
src/main/java/com/github/queueserver/mohist/
â”œâ”€â”€ QueueMohistPlugin.java          # ä¸»æ’ä»¶ç±»
â”œâ”€â”€ commands/                       # å‘½ä»¤å¤„ç†å™¨
â”‚   â”œâ”€â”€ QueueCommands.java         # ç©å®¶å‘½ä»¤
â”‚   â””â”€â”€ AdminCommands.java         # ç®¡ç†å‘˜å‘½ä»¤
â”œâ”€â”€ config/                        # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ ConfigManager.java         # é…ç½®æ–‡ä»¶ç®¡ç†å™¨
â”œâ”€â”€ database/                      # æ•°æ®åº“å±‚
â”‚   â””â”€â”€ SimpleDatabaseManager.java # æ•°æ®åº“ç®¡ç†å™¨
â”œâ”€â”€ queue/                         # é˜Ÿåˆ—ç³»ç»Ÿ
â”‚   â””â”€â”€ SimpleQueueManager.java   # é˜Ÿåˆ—ç®¡ç†å™¨
â”œâ”€â”€ vip/                          # VIP ç³»ç»Ÿ
â”‚   â””â”€â”€ VIPManager.java           # VIP ç®¡ç†å™¨
â”œâ”€â”€ monitor/                      # æœåŠ¡å™¨ç›‘æ§
â”‚   â””â”€â”€ ServerMonitor.java        # æœåŠ¡å™¨çŠ¶æ€ç›‘æ§
â”œâ”€â”€ listeners/                    # äº‹ä»¶ç›‘å¬å™¨
â”‚   â”œâ”€â”€ PlayerListener.java       # ç©å®¶äº‹ä»¶
â”‚   â””â”€â”€ ServerListener.java       # æœåŠ¡å™¨äº‹ä»¶
â””â”€â”€ compatibility/                # å…¼å®¹æ€§å¤„ç†
    â””â”€â”€ ModCompatibilityHandler.java # Mod å…¼å®¹æ€§
```

### æ„å»ºé¡¹ç›®

```bash
# å®‰è£…ä¾èµ–å¹¶ç¼–è¯‘
mvn clean install

# ä»…ç¼–è¯‘æ‰“åŒ…
mvn clean package

# è·³è¿‡æµ‹è¯•ç¼–è¯‘
mvn clean package -DskipTests
```

### è°ƒè¯•æ¨¡å¼

åœ¨ `config.yml` ä¸­å¯ç”¨è°ƒè¯•æ¨¡å¼ï¼š

```yaml
debug:
  enabled: true
  log-level: "DEBUG"
  verbose-queue: true
  monitor-details: true
```

## ğŸŒ ç½‘ç»œæ¶æ„

### ä»£ç†æ¨¡å¼éƒ¨ç½²

```mermaid
graph TD
    A[ç©å®¶] --> B[Velocity/BungeeCord ä»£ç†]
    B --> C[é˜Ÿåˆ—æœåŠ¡å™¨ - Mohist]
    C --> D[æ¸¸æˆæœåŠ¡å™¨ - Paper/Spigot]
    C --> E[æ¸¸æˆæœåŠ¡å™¨ - Mohist]
    C --> F[æ¸¸æˆæœåŠ¡å™¨ - Fabric]
```

### ç‹¬ç«‹æ¨¡å¼éƒ¨ç½²

```mermaid
graph TD
    A[ç©å®¶] --> B[é˜Ÿåˆ—æœåŠ¡å™¨ - Mohist]
    B --> B
    B -.-> C[å¤–éƒ¨ç›‘æ§]
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: æ’ä»¶æ— æ³•è¿æ¥åˆ°ç›®æ ‡æœåŠ¡å™¨**
- æ£€æŸ¥ç›®æ ‡æœåŠ¡å™¨åœ°å€å’Œç«¯å£é…ç½®
- ç¡®è®¤ç›®æ ‡æœåŠ¡å™¨æ­£åœ¨è¿è¡Œä¸”å¯è®¿é—®
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

**Q: VIP ç³»ç»Ÿä¸å·¥ä½œ**
- ç¡®è®¤ VIP æƒé™èŠ‚ç‚¹ `queue.vip` å·²æ­£ç¡®åˆ†é…
- æ£€æŸ¥ VIP é…ç½®æ˜¯å¦å¯ç”¨
- éªŒè¯æƒé™æ’ä»¶é…ç½®

**Q: æ•°æ®åº“è¿æ¥å¤±è´¥**
- æ£€æŸ¥æ•°æ®åº“é…ç½®ä¿¡æ¯
- ç¡®è®¤æ•°æ®åº“æœåŠ¡æ­£åœ¨è¿è¡Œ
- éªŒè¯æ•°æ®åº“æƒé™è®¾ç½®

### æ—¥å¿—åˆ†æ

æ’ä»¶æ—¥å¿—ä½äº `logs/latest.log`ï¼Œæœç´¢ä»¥ä¸‹å…³é”®è¯ï¼š

- `[QueueServer]` - æ’ä»¶ä¸»è¦æ—¥å¿—
- `[Queue]` - é˜Ÿåˆ—ç›¸å…³æ“ä½œ
- `[Monitor]` - æœåŠ¡å™¨ç›‘æ§æ—¥å¿—
- `[VIP]` - VIP ç³»ç»Ÿæ—¥å¿—
- `ERROR` - é”™è¯¯ä¿¡æ¯

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### æœåŠ¡å™¨ä¼˜åŒ–å»ºè®®

1. **JVM å‚æ•°ä¼˜åŒ–**ï¼š
```bash
java -Xms2G -Xmx4G -XX:+UseG1GC -XX:+UnlockExperimentalVMOptions \
     -XX:MaxGCPauseMillis=100 -XX:+DisableExplicitGC \
     -jar mohist-server.jar
```

2. **é…ç½®ä¼˜åŒ–**ï¼š
```yaml
queue:
  check-interval: 15        # å‡å°‘æ£€æŸ¥é—´éš”æé«˜å“åº”é€Ÿåº¦
  transfer-batch-size: 3    # è¾ƒå°çš„æ‰¹æ¬¡å¤§å°å‡å°‘å»¶è¿Ÿ

monitor:
  check-interval: 20        # ä¼˜åŒ–ç›‘æ§é¢‘ç‡
  connection-timeout: 3000  # å‡å°‘è¶…æ—¶æ—¶é—´
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ Java 17+ è¯­æ³•ç‰¹æ€§
- éµå¾ª Google Java Style Guide
- æ·»åŠ é€‚å½“çš„æ³¨é‡Šå’Œæ–‡æ¡£
- ç¼–å†™å•å…ƒæµ‹è¯•

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0-SNAPSHOT (å¼€å‘ä¸­)
- âœ… åŸºç¡€é˜Ÿåˆ—ç®¡ç†ç³»ç»Ÿ
- âœ… Mohist æ··åˆæœåŠ¡å™¨æ”¯æŒ
- âœ… VIP ä¼˜å…ˆé˜Ÿåˆ—
- âœ… æœåŠ¡å™¨çŠ¶æ€ç›‘æ§
- âœ… æ•°æ®åº“æŒä¹…åŒ–
- âœ… å‘½ä»¤ç³»ç»Ÿ
- ğŸ”„ ä»£ç†ç½‘ç»œé›†æˆ
- ğŸ”„ Web ç®¡ç†ç•Œé¢

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº [MIT License](LICENSE) å¼€æºåè®®ã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- [Mohist å®˜ç½‘](https://mohistmc.com/)
- [Spigot API æ–‡æ¡£](https://hub.spigotmc.org/javadocs/spigot/)
- [Velocity æ–‡æ¡£](https://docs.papermc.io/velocity)
- [é—®é¢˜åé¦ˆ](https://github.com/xiaoxiao-cvs/QueueServer/issues)

## ğŸ‘¥ å¼€å‘å›¢é˜Ÿ

- **ç»´æŠ¤è€…**: QueueServer Team
- **è´¡çŒ®è€…**: æŸ¥çœ‹ [Contributors](https://github.com/xiaoxiao-cvs/QueueServer/graphs/contributors)

---

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª â­ Starï¼

æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Ÿæ¬¢è¿ [æäº¤ Issue](https://github.com/xiaoxiao-cvs/QueueServer/issues/new) æˆ–åŠ å…¥æˆ‘ä»¬çš„ç¤¾åŒºè®¨è®ºã€‚